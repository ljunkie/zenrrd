$(document).ready(function(){$("#int_name").focus();$("#reset_dates").click(function(){localStorage.removeItem("datestart");localStorage.removeItem("dateend");$("#datepicker_start, #datepicker_end").val("")});var a=localStorage.getItem("datestart"),c=localStorage.getItem("dateend"),e=parseQuery(window.location.search);if(1!=e.reloaded){var b=0,f="";!$.isBlank(a)&&$.isBlank(e.start)&&(b=1,f+="&start="+a);!$.isBlank(c)&&$.isBlank(e.end)&&(b=1,f+="&end="+c);if(1==b){var g="";$.each(e,function(d,a){g=
g+("&"+d+"="+a)});window.location="?reloaded=1"+g+f}}a=$("#device_name").val();"undefined"!=typeof a&&(0<a.length?($("#updategraph").show(),$("#timeframe").show()):($("#updategraph").hide(),$("#timeframe").hide()));$(".on_change_device").change(function(){$("#int_name").val("");$(this).closest("form").submit()});$(".on_change_int").change(function(){$(this).closest("form").submit()});$("#datepicker_start").datetimepicker({onClose:function(d){localStorage.setItem("datestart",d);var a=$("#datepicker_end");
if(a.val()!=""){var b=new Date(d),c=new Date(a.val());if(b>=c){d=new Date(d);d=getFormattedDate(new Date(d.getFullYear(),d.getMonth(),d.getDate()+1));a.val(d);localStorage.setItem("dateend",d)}}},onSelect:function(){var a=$(this).datetimepicker("getDate");$("#datepicker_end").datetimepicker("option","minDate",new Date(a.getTime()))}}).datepicker("setDate",localStorage.getItem("datestart"));$("#datepicker_end").datetimepicker({onClose:function(a){localStorage.setItem("dateend",a);var b=$("#datepicker_start");
if(b.val()!=""&&new Date(b.val())>=new Date(a)){a=new Date(a);a=getFormattedDate(new Date(a.getFullYear(),a.getMonth(),a.getDate()-1));b.val(a);localStorage.setItem("datestart",a)}},onSelect:function(){var a=$(this).datetimepicker("getDate");$("#datepicker_start").datetimepicker("option","maxDate",new Date(a.getTime()))}}).datepicker("setDate",localStorage.getItem("dateend"));$("#datepicker_end").datetimepicker("option","maxDate",new Date);a=localStorage.getItem("dateend");$.isBlank(a)?$("#datepicker_start").datetimepicker("option",
"maxDate",new Date):$("#datepicker_start").datetimepicker("option","maxDate",new Date(a));$(".autocomplete").autocomplete({source:"ajax.php?ac=1&t=interface",minLength:2,select:function(a,b){a.preventDefault();$("#device_name").val(b.item.device);window.location="?device="+b.item.device+"&int="+b.item["int"]}})});function getFormattedDate(a){var c=("0"+a.getDate()).substr(-2),e=("0"+(a.getMonth()+1)).substr(-2),a=a.getFullYear();return e+"/"+c+"/"+a}
function parseQuery(a){var c={};if(!a)return c;for(var a=a.split(/[;&]/),e=0;e<a.length;e++){var b=a[e].split("=");if(b&&2==b.length){var f=unescape(b[0]),f=f.replace(/\?/g,""),b=unescape(b[1]),b=b.replace(/\+/g," ");c[f]=b}}return c}(function(a){a.isBlank=function(c){return!c||""===a.trim(c)}})(jQuery);
